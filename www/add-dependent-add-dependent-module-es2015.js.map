{"version":3,"sources":["./src/app/add-dependent/add-dependent.page.html","./src/app/add-dependent/add-dependent.module.ts","./src/app/add-dependent/add-dependent.page.scss","./src/app/add-dependent/add-dependent.page.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,mvCAAorC,sBAAsB,+wBAA+wB,sBAAsB,2wBAA2wB,sBAAsB,8zBAA8zB,sBAAsB,00BAA00B,sBAAsB,0iB;;;;;;;;;;;;;;;;;;;;;;;ACA16I;AACM;AACmB;AACX;AAEY;AACtB;AAEW;AAExD,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,oEAAgB;KAC5B;CACF,CAAC;AAaF,IAAa,sBAAsB,GAAnC,MAAa,sBAAsB;CAAG;AAAzB,sBAAsB;IAXlC,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,kEAAmB;YACnB,0DAAW;YACX,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;YAC7B,8EAAgB;SACjB;QACD,YAAY,EAAE,CAAC,oEAAgB,CAAC;KACjC,CAAC;GACW,sBAAsB,CAAG;AAAH;;;;;;;;;;;;;AC5BnC;AAAe,iGAAkC,6CAA6C,yBAAyB,kBAAkB,8BAA8B,gCAAgC,mCAAmC,oBAAoB,GAAG,4CAA4C,sDAAsD,6DAA6D,GAAG,cAAc,6CAA6C,GAAG,6CAA6C,m+C;;;;;;;;;;;;;;;;;;;;;;;;ACA5d;AACkB;AACb;AACd;AAEA;AAClB;AACI;AAQ3B,IAAa,gBAAgB,GAA7B,MAAa,gBAAgB;IAwB3B,YAAoB,MAAc,EACd,KAAsB;QADtB,WAAM,GAAN,MAAM,CAAQ;QACd,UAAK,GAAL,KAAK,CAAiB;QArBtC,cAAS,GAAG,KAAK,CAAC;QAClB,wBAAmB,GAAG;YAChB,aAAa,EAAE;gBACT,EAAE,IAAI,EAAE,UAAU,EAAE,OAAO,EAAE,6BAA6B,EAAE;aACjE;YACD,OAAO,EAAE;gBACP,EAAE,IAAI,EAAE,UAAU,EAAE,OAAO,EAAE,oBAAoB,EAAE;gBACnD,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,sBAAsB,EAAE;aACrD;YACD,OAAO,EAAE;gBACH,EAAE,IAAI,EAAE,UAAU,EAAE,OAAO,EAAE,oCAAoC,EAAE;aACxE;YACD,cAAc,EAAE;gBACV,EAAE,IAAI,EAAE,UAAU,EAAE,OAAO,EAAE,yCAAyC,EAAC;aAC5E;YACD,UAAU,EAAE;gBACV,EAAE,IAAI,EAAE,UAAU,EAAE,OAAO,EAAE,uBAAuB,EAAE;gBACtD,EAAE,IAAI,EAAE,WAAW,EAAE,OAAO,EAAE,8CAA8C,EAAE;aAC/E;SACF,CAAC;QAGJ,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;QAC3C,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;QAC3C,cAAc;QACZ,IAAI,CAAC,aAAa,GAAG,IAAI,wDAAS,CAAC;YAC7B,aAAa,EAAE,IAAI,0DAAW,CAAC,EAAE,EAAE,yDAAU,CAAC,OAAO,CAAC;gBAChD,yDAAU,CAAC,QAAQ;aACxB,CAAC,CAAC;YACL,OAAO,EAAE,IAAI,0DAAW,CAAC,EAAE,EAAE,yDAAU,CAAC,OAAO,CAAC;gBAC9C,yDAAU,CAAC,QAAQ;gBACnB,yDAAU,CAAC,OAAO,CAAC,iDAAiD,CAAC;aACtE,CAAC,CAAC;YACH,OAAO,EAAE,IAAI,0DAAW,CAAC,EAAE,EAAE,yDAAU,CAAC,OAAO,CAAC;gBAC1C,yDAAU,CAAC,QAAQ;aACxB,CAAC,CAAC;YACH,cAAc,EAAE,IAAI,0DAAW,CAAC,EAAE,EAAE,yDAAU,CAAC,OAAO,CAAC;gBACjD,yDAAU,CAAC,QAAQ;aACxB,CAAC,CAAC;YACH,UAAU,EAAE,IAAI,0DAAW,CAAC,EAAE,EAAE,yDAAU,CAAC,OAAO,CAAC;gBACjD,yDAAU,CAAC,SAAS,CAAC,CAAC,CAAC;gBACvB,yDAAU,CAAC,QAAQ;aACpB,CAAC,CAAC;SACJ,CAAC,CAAC;IACV,CAAC;IAGD,YAAY,CAAC,GAAQ;QAClB,4BAA4B;QAC5B,oBAAoB;QACpB,MAAM,SAAS,GAAG;YACZ,QAAQ,EAAE,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,KAAK;YACrD,KAAK,EAAE,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,KAAK;YAC5C,KAAK,EAAE,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,KAAK;YAC5C,YAAY,EAAE,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC,KAAK;YAC1D,QAAQ,EAAE,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,KAAK;YAClD,WAAW,EAAE,IAAI,CAAC,GAAG;YACrB,GAAG,EAAE,GAAG;YACR,IAAI,EAAE,WAAW;YACjB,QAAQ,EAAE,EAAE;SACjB,CAAC;QACF,2CAA2C;QAC3C,qDAAiB,EAAE,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;YAC5F,OAAO,CAAC,GAAG,CAAC,+BAA+B,CAAC,CAAC;YAC7C,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;QACzC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,GAAU,EAAE,EAAE;YAClB,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACjC,CAAC,CAAC,CAAC;QACH,iCAAiC;QACjC,qDAAiB,EAAE,CAAC,GAAG,CAAC,aAAa,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;YAC/D,OAAO,CAAC,GAAG,CAAC,kCAAkC,CAAC,CAAC;QACtD,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,GAAU,EAAE,EAAE;YAClB,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACjC,CAAC,CAAC,CAAC;IACN,CAAC;IAED,sBAAsB;QAChB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC;QACpD,MAAM,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,KAAK,CAAC;QAC7D,cAAc;QACd,qCAAqC;QACrC,iDAAa,EAAE,CAAC,8BAA8B,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;YACvE,sBAAsB;YACtB,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAChC,OAAO,CAAC,GAAG,CAAC,gCAAgC,CAAC,CAAC;QACpD,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,GAAU,EAAE,EAAE;YAClB,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACjC,CAAC,CAAC,CAAC;IAEN,CAAC;IAEF,QAAQ;IACR,CAAC;CAEF;;YA5E6B,sDAAM;YACP,kEAAe;;AAzB/B,gBAAgB;IAN5B,+DAAS,CAAC;QACT,QAAQ,EAAE,mBAAmB;QAC7B,iOAAwC;QAExC,SAAS,EAAE,CAAC,kEAAe,CAAC;;KAC7B,CAAC;2EAyB4B,sDAAM;QACP,kEAAe;GAzB/B,gBAAgB,CAoG5B;AApG4B","file":"add-dependent-add-dependent-module-es2015.js","sourcesContent":["export default \"<ion-header no-border>\\n    <ion-toolbar color='primary'>\\n        <ion-buttons slot=\\\"start\\\">\\n            <!-- <ion-menu-button></ion-menu-button> -->\\n            <ion-back-button></ion-back-button>\\n        </ion-buttons>\\n        <ion-title>Add a Dependent</ion-title>\\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"book-guest-content\\\" *ngIf='role === \\\"resident\\\"'>\\n    <form [formGroup]=\\\"dependentForm\\\" (ngSubmit)=\\\"createDependentAccount()\\\">\\n        <ion-list class=\\\"inputs-list\\\" lines=\\\"full\\\">\\n            <!-- ACCOUNT NAME-->\\n            <ion-item class=\\\"input-item\\\">\\n                <ion-input type=\\\"text\\\" placeholder='Account Name' formControlName='accountName'></ion-input>\\n            </ion-item>\\n            <div class=\\\"error-container\\\">\\n                <ng-container *ngFor=\\\"let validation of validation_messages.accountName\\\">\\n                    <div class=\\\"error-message\\\" *ngIf=\\\"dependentForm.get('accountName').hasError(validation.type) && (dependentForm.get('accountName').dirty || dependentForm.get('accountName').touched)\\\">\\n                        <ion-icon name=\\\"information-circle-outline\\\"></ion-icon>\\n                        <span>{{ validation.message }}</span>\\n                    </div>\\n                </ng-container>\\n            </div>\\n            <!-- EMAIL -->\\n            <ion-item class=\\\"input-item\\\">\\n                <ion-input type=\\\"email\\\" placeholder=\\\"Email\\\" formControlName=\\\"email\\\" clearInput autocapitalize=\\\"off\\\" inputmode=\\\"email\\\"></ion-input>\\n            </ion-item>\\n            <div class=\\\"error-container\\\">\\n                <ng-container *ngFor=\\\"let validation of validation_messages.email\\\">\\n                    <div class=\\\"error-message\\\" *ngIf=\\\"dependentForm.get('email').hasError(validation.type) && (dependentForm.get('email').dirty || dependentForm.get('email').touched)\\\">\\n                        <ion-icon name=\\\"information-circle-outline\\\"></ion-icon>\\n                        <span>{{ validation.message }}</span>\\n                    </div>\\n                </ng-container>\\n            </div>\\n            <!-- PHONE -->\\n            <ion-item class=\\\"input-item\\\">\\n                <ion-input type=\\\"tel\\\" placeholder=\\\"Phone\\\" formControlName=\\\"phone\\\" clearInput autocapitalize=\\\"off\\\" inputmode=\\\"tel\\\"></ion-input>\\n            </ion-item>\\n            <div class=\\\"error-container\\\">\\n                <ng-container *ngFor=\\\"let validation of validation_messages.phone\\\">\\n                    <div class=\\\"error-message\\\" *ngIf=\\\"dependentForm.get('phone').hasError(validation.type) && (dependentForm.get('phone').dirty || dependentForm.get('phone').touched)\\\">\\n                        <ion-icon name=\\\"information-circle-outline\\\"></ion-icon>\\n                        <span>{{ validation.message }}</span>\\n                    </div>\\n                </ng-container>\\n            </div>\\n            <!-- RELATIONSHIP -->\\n            <ion-item class=\\\"input-item\\\">\\n                <ion-input type=\\\"text\\\" placeholder=\\\"Relationship\\\" formControlName=\\\"relationship\\\" clearInput autocapitalize=\\\"off\\\" inputmode=\\\"text\\\"></ion-input>\\n            </ion-item>\\n            <div class=\\\"error-container\\\">\\n                <ng-container *ngFor=\\\"let validation of validation_messages.relationship\\\">\\n                    <div class=\\\"error-message\\\" *ngIf=\\\"dependentForm.get('relationship').hasError(validation.type) && (dependentForm.get('relationship').dirty || dependentForm.get('relationship').touched)\\\">\\n                        <ion-icon name=\\\"information-circle-outline\\\"></ion-icon>\\n                        <span>{{ validation.message }}</span>\\n                    </div>\\n                </ng-container>\\n            </div>\\n            <!-- PASSWORD -->\\n            <ion-item class=\\\"input-item\\\">\\n                <app-show-hide-password>\\n                    <ion-input type=\\\"password\\\" placeholder=\\\"Password\\\" formControlName=\\\"password\\\"></ion-input>\\n                </app-show-hide-password>\\n            </ion-item>\\n            <div class=\\\"error-container\\\">\\n                <ng-container *ngFor=\\\"let validation of validation_messages.password\\\">\\n                    <div class=\\\"error-message\\\" *ngIf=\\\"dependentForm.get('password').hasError(validation.type) && (dependentForm.get('password').dirty || dependentForm.get('password').touched)\\\">\\n                        <ion-icon name=\\\"information-circle-outline\\\"></ion-icon>\\n                        <span>{{ validation.message }}</span>\\n                    </div>\\n                </ng-container>\\n            </div>\\n        </ion-list>\\n\\n        <ion-button class=\\\"login-btn\\\" type=\\\"submit\\\" expand=\\\"block\\\" [disabled]=\\\"!dependentForm.valid || isLoading\\\">\\n            <ion-spinner name=\\\"crescent\\\" slot='start' *ngIf='isLoading'></ion-spinner>\\n            <ion-text *ngIf='isLoading' style='margin-left: 30px !important'>Adding Dependent...</ion-text>\\n            <ion-text *ngIf='!isLoading'>Add Dependent</ion-text>\\n        </ion-button>\\n    </form>\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ComponentsModule } from '../components/components.module';\nimport { IonicModule } from '@ionic/angular';\n\nimport { AddDependentPage } from './add-dependent.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AddDependentPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    ComponentsModule\n  ],\n  declarations: [AddDependentPage]\n})\nexport class AddDependentPageModule {}\n","export default \".error-container .error-message {\\n  margin: calc(var(--page-margin) / 2) 0px;\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-align: center;\\n          align-items: center;\\n  color: var(--ion-color-danger);\\n  font-size: 14px;\\n}\\n.error-container .error-message ion-icon {\\n  -webkit-padding-end: calc(var(--page-margin) / 2);\\n          padding-inline-end: calc(var(--page-margin) / 2);\\n}\\n.login-btn {\\n  margin: calc(var(--page-margin) / 2) 0px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9Ncl9Gcm9zaC9EZXNrdG9wL1NlY3VyZVBhc3Mvc3JjL2FwcC9hZGQtZGVwZW5kZW50L2FkZC1kZXBlbmRlbnQucGFnZS5zY3NzIiwic3JjL2FwcC9hZGQtZGVwZW5kZW50L2FkZC1kZXBlbmRlbnQucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNJO0VBQ0ksd0NBQUE7RUFDQSxvQkFBQTtFQUFBLGFBQUE7RUFDQSx5QkFBQTtVQUFBLG1CQUFBO0VBQ0EsOEJBQUE7RUFDQSxlQUFBO0FDQVI7QURDUTtFQUNJLGlEQUFBO1VBQUEsZ0RBQUE7QUNDWjtBRElBO0VBQ0ksd0NBQUE7QUNESiIsImZpbGUiOiJzcmMvYXBwL2FkZC1kZXBlbmRlbnQvYWRkLWRlcGVuZGVudC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZXJyb3ItY29udGFpbmVyIHtcbiAgICAuZXJyb3ItbWVzc2FnZSB7XG4gICAgICAgIG1hcmdpbjogY2FsYyh2YXIoLS1wYWdlLW1hcmdpbikgLyAyKSAwcHg7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItZGFuZ2VyKTtcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICBpb24taWNvbiB7XG4gICAgICAgICAgICBwYWRkaW5nLWlubGluZS1lbmQ6IGNhbGModmFyKC0tcGFnZS1tYXJnaW4pIC8gMik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi5sb2dpbi1idG4ge1xuICAgIG1hcmdpbjogY2FsYyh2YXIoLS1wYWdlLW1hcmdpbikgLyAyKSAwcHg7XG59IiwiLmVycm9yLWNvbnRhaW5lciAuZXJyb3ItbWVzc2FnZSB7XG4gIG1hcmdpbjogY2FsYyh2YXIoLS1wYWdlLW1hcmdpbikgLyAyKSAwcHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItZGFuZ2VyKTtcbiAgZm9udC1zaXplOiAxNHB4O1xufVxuLmVycm9yLWNvbnRhaW5lciAuZXJyb3ItbWVzc2FnZSBpb24taWNvbiB7XG4gIHBhZGRpbmctaW5saW5lLWVuZDogY2FsYyh2YXIoLS1wYWdlLW1hcmdpbikgLyAyKTtcbn1cblxuLmxvZ2luLWJ0biB7XG4gIG1hcmdpbjogY2FsYyh2YXIoLS1wYWdlLW1hcmdpbikgLyAyKSAwcHg7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { Validators, FormGroup, FormControl } from '@angular/forms';\nimport { HoaStoreService } from '../hoa-store.service';\nimport { Router } from '@angular/router';\n\nimport * as firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/database';\n\n@Component({\n  selector: 'app-add-dependent',\n  templateUrl: './add-dependent.page.html',\n  styleUrls: ['./add-dependent.page.scss'],\n  providers: [HoaStoreService]\n})\nexport class AddDependentPage implements OnInit {\n      dependentForm: FormGroup;\n      role;\n      uid;\n      isLoading = false;\n      validation_messages = {\n            'accountName': [\n                  { type: 'required', message: 'Dependent name is required.' }\n            ],\n            'email': [\n              { type: 'required', message: 'Email is required.' },\n              { type: 'pattern', message: 'Enter a valid email.' }\n            ],\n            'phone': [\n                  { type: 'required', message: 'Dependent phone number is required' }\n            ],\n            'relationship': [\n                  { type: 'required', message: 'Relationship with dependent is required'}\n            ],\n            'password': [\n              { type: 'required', message: 'Password is required.' },\n              { type: 'minlength', message: 'Password must be at least 6 characters long.' }\n            ]\n          };\n  constructor(private router: Router,\n              private store: HoaStoreService) {\n        this.role = this.store.getItem('hoa-role');\n        this.uid = this.store.getItem('hoa-uid');\n      //   INIT FORM\n        this.dependentForm = new FormGroup({\n              'accountName': new FormControl('', Validators.compose([\n                    Validators.required\n              ])),\n            'email': new FormControl('', Validators.compose([\n              Validators.required,\n              Validators.pattern('^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$')\n            ])),\n            'phone': new FormControl('', Validators.compose([\n                  Validators.required\n            ])),\n            'relationship': new FormControl('', Validators.compose([\n                  Validators.required\n            ])),\n            'password': new FormControl('', Validators.compose([\n              Validators.minLength(6),\n              Validators.required\n            ]))\n          });\n   }\n\n\n   addDependent(uid: any) {\n      //    this.isLoading = true;\n      //    INIT DEPENDENT\n      const dependent = {\n            fullname: this.dependentForm.get('accountName').value,\n            email: this.dependentForm.get('email').value,\n            phone: this.dependentForm.get('phone').value,\n            relationship: this.dependentForm.get('relationship').value,\n            password: this.dependentForm.get('password').value,\n            dependentOn: this.uid,\n            uid: uid,\n            role: 'dependent',\n            visitors: ''\n      };\n      // ADD DEPENDENT TO USER'S /dependent ROUTE\n      firebase.database().ref(`${this.role}/${this.uid}`).child('dependents').push(dependent).then(() => {\n            console.log('Dependent added to user route');\n            this.isLoading = false;\n            this.router.navigate(['app/user']);\n      }).catch((err: Error) => {\n            console.error(err.message);\n      });\n      // ADD DEPENDENT TO GENERAL ROUTE\n      firebase.database().ref(`dependent/${uid}`).set(dependent).then(() => {\n            console.log('Dependent added to general route');\n      }).catch((err: Error) => {\n            console.error(err.message);\n      });\n   }\n\n   createDependentAccount() {\n         this.isLoading = true;\n         const email = this.dependentForm.get('email').value;\n         const password = this.dependentForm.get('password').value;\n      //    let uid;\n      //    CREATE DEPENDENT'S AUTH ACCOUNT\n      firebase.auth().createUserWithEmailAndPassword(email, password).then((res) => {\n            // uid = res.user.uid;\n            this.addDependent(res.user.uid);\n            console.log('Dependent created successfully');\n      }).catch((err: Error) => {\n            console.error(err.message);\n      });\n\n   }\n\n  ngOnInit() {\n  }\n\n}\n"],"sourceRoot":"webpack:///"}